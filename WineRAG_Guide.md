# Wine RAG Embedding 실습 가이드 🍷

## 📖 개요

AI 소믈리에 서비스를 위한 와인 RAG(Retrieval-Augmented Generation) 시스템 구축 실습입니다. 
와인 이미지와 텍스트를 분석하여 개인화된 와인 추천과 페어링을 제공하는 시스템을 만들어봅시다.

## 🎯 학습 목표

1. **멀티모달 AI 이해**: 이미지와 텍스트를 함께 처리하는 AI 시스템 구축
2. **벡터 임베딩**: 와인 데이터를 벡터로 변환하여 유사도 검색 구현
3. **RAG 시스템**: Pinecone을 활용한 효율적인 정보 검색 및 생성
4. **LangChain 활용**: 프롬프트 엔지니어링과 체인 구성

## 🏗️ 시스템 아키텍처

```
[와인 이미지] → [Gemini Vision] → [텍스트 분석] → [임베딩] → [Pinecone DB]
                                                           ↓
[사용자 질의] → [임베딩] → [유사도 검색] → [RAG 생성] → [개인화 추천]
```

## 📊 데이터 구조

### Pinecone 벡터 DB 현황
- **총 벡터 수**: 390,273개
- **차원**: 1536 (OpenAI embedding)
- **네임스페이스**:
  - `wine-reviews-ns1`: 259,942개 (와인 리뷰 데이터)
  - `wine_description_only`: 130,331개 (와인 설명 데이터)

## 🔧 핵심 구성 요소

### 1. AI 소믈리에 페르소나
```
전문 소믈리에로서 와인 선정, 음식 페어링, 와인 서비스에 대한 깊은 지식을 보유
- 다양한 와인 지역과 포도 품종에 대한 이해
- 미묘한 풍미와 특성을 구분하는 정교한 미각
- 사용자 맞춤형 추천 제공
```

### 2. 주요 기능들

#### A. 와인 이미지 기반 요리 추천 (`recommend_dishes_chain`)
- **입력**: 와인 이미지 + 질의 텍스트
- **출력**: 해당 와인과 어울리는 요리 추천
- **활용**: LangChain 프롬프트 템플릿

#### B. 요리 이미지 기반 풍미 분석 (`describe_dish_flavor_chain`)
- **입력**: 요리 이미지
- **출력**: 요리의 풍미 프로필 분석
- **특징**: 맛, 질감, 향 등 종합적 분석

### 3. 기술 스택
- **LLM**: Gemini API (멀티모달 지원)
- **벡터 DB**: Pinecone
- **프레임워크**: LangChain
- **임베딩**: OpenAI text-embedding-ada-002
- **언어**: Python + Jupyter Notebook

## 🔑 핵심 개념

### 멀티모달 AI (LMM)
- **LLM**: text → model → text
- **LMM**: image → model → text
- Gemini와 같은 옴니 모델은 LLM과 LMM을 모두 지원

### RAG 시스템의 장점
1. **실시간 정보**: 최신 와인 데이터 반영
2. **정확성**: 벡터 검색을 통한 관련성 높은 정보 제공
3. **개인화**: 사용자 선호도 기반 맞춤 추천
4. **확장성**: 새로운 와인 데이터 쉽게 추가

## 📝 실습 과정

### 1단계: 환경 설정
- Gemini API 키 설정
- Pinecone 연결 확인
- 필요 라이브러리 설치

### 2단계: 데이터 탐색
- Pinecone 인덱스 상태 확인
- 와인 데이터 구조 분석

### 3단계: 체인 구성
- 프롬프트 템플릿 설계
- LangChain 체인 구축
- 멀티모달 입력 처리

### 4단계: 테스트 및 최적화
- 다양한 와인 이미지로 테스트
- 응답 품질 평가 및 개선

## 🎨 예시 시나리오

### 시나리오 1: 와인 → 요리 추천
```
입력: Primitivo 와인 이미지
출력: 
- 그릴드 스테이크
- 바비큐 립
- 라자냐
- 양고기 요리
- 숙성 치즈 플래터
```

### 시나리오 2: 요리 → 풍미 분석
```
입력: 그래놀라 바 이미지
출력: "견과류와 귀리가 들어간 그래놀라 바로, 고소하고 달콤한 맛이 특징입니다."
```

## 🔍 실습 포인트

1. **프롬프트 엔지니어링**: 소믈리에 페르소나를 잘 표현하는 프롬프트 작성
2. **이미지 처리**: 멀티모달 입력을 위한 적절한 이미지 URL 포맷
3. **체인 최적화**: LangChain을 활용한 효율적인 처리 파이프라인
4. **벡터 검색**: Pinecone을 통한 관련 와인 정보 검색

## 💡 확장 아이디어

1. **개인화 강화**: 사용자 히스토리 기반 추천
2. **실시간 재고**: 와인샵 재고와 연동
3. **소셜 기능**: 와인 리뷰 및 평점 시스템
4. **AR 통합**: 와인 라벨 스캔 기능

## 📚 참고 자료

- [LangChain 공식 문서](https://python.langchain.com/)
- [Pinecone 벡터 DB 가이드](https://www.pinecone.io/learn/)
- [Gemini API 문서](https://ai.google.dev/tutorials)
- 와인 소믈리에 전문 지식 베이스

---

*"와인은 단순한 음료가 아니라, 문화와 예술이 담긴 경험입니다. AI와 함께 그 깊이를 탐험해보세요!"*